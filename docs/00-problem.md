# 문제정의 (Why)

한글 폰트를 **자동으로 발견**하고(눈누/KOGL/공유마당), 원본을 **Cloudflare R2에 아카이브**한 뒤, 각 폰트를 **npm 웹폰트 패키지로 표준화 배포**한다.

운영 방식은 “자동 PR 생성 → (필요 시 PR 수정) → merge 즉시 publish”로 고정한다.

---

## 해결하려는 문제

- **발견/수집의 반복 비용**: 신규 폰트가 올라와도 사람이 매번 찾아서 다운로드/정리/패키징해야 한다.
- **원본 보관의 일관성**: 원본이 링크 변경/삭제되면 재현 가능한 빌드가 깨진다.
- **배포 표준화 부재**: 패키지 구조/엔트리(css import)/메타데이터가 제각각이면 사용성이 떨어진다.
- **운영 자동화 부재**: “발견 → PR → 배포 → 정리(거절/중복 방지)”가 연결되지 않으면 유지비가 급증한다.

---

## MVP에서의 핵심 원칙

- **PR 단위 고정**: 원본 1건(대부분 zip)당 PR 1개.
- **R2는 빌드 전용 아카이브**: 사용자가 직접 접근하는 CDN으로 쓰지 않는다.
- **SSOT 3종만 유지**:
  - `fonts/<id>.yml`: 패키지 레시피 (family/psName 중심)
  - `registry/sources.lock.json`: 원본 장부(sha256 → R2 key)
  - `registry/rejected.json`: 거절 기록(sha256/url)로 반복 PR 방지
- **고도화 금지**: 후보 큐/복잡한 상태머신/렌더 QA/퍼지매칭/벡터검색은 제외.
- **정답은 PR에서 보정 가능**: weight/style 추정, id/packageName/family 표기는 초안만 자동 생성한다.

---

## Non-goals (명시적 제외)

- 브라우저 렌더링 QA(Playwright 등)
- “완전 자동 판정”을 위한 복잡한 규칙/모델(퍼지매칭/벡터검색/후보 큐)
- 주기적 GC(주기 스캔/정리). PR close 이벤트 기반 정리만 한다.
